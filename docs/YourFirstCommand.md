# Пособие по созданию команд
Команда — это короткое слово или фраза, которая сигнализирует о том, что необходимо выполнить заранее созданные инструкции. Выполнить слэш-команду — означает отреагировать на действия пользователя вызвавшего её — выполнить код, обязательно отправив ответ.
  
Все команды находятся по пути `~/src/commands`. Это JavaScript файлы, которые автоматически импортируются. Каждый из них обязан экспортировать класс с именем `Command`. О содержимом которого поговорим в главе "Тело команды".  
  
Список доступных команд также хранится на стороне Дискорда. Чтобы эти команды отображались, этот список требуется обновлять: см. скрипт `~/scripts/refreshCommands`  
## Терминология
**Interaction** — взаимодействие. Контекст содержащий максимально возможные данные о взаимодействии пользователя с командой, кнопкой или модальным окном.  
**Slash** — слэш-команда.  
**Component** — кнопка, или подобный кнопке элемент с которым может работать пользователь.  
**Modal** — всплывающее окно, которое можно вызвать ответом на взаимодействие.
## Тело команды 
На момент v1.0 основа команды состоит из двух методов: `onSlashInteraction` & `onComponentInteraction` и одного статического свойства хранящего параметры — `options`.
```js
class Command extends BaseCommand {
  constructor(){
  }

  onSlashInteraction(interaction){
  }

  onComponentInteraction(interaction){
  }

  static options = {
    name: "<NAME>",
    description: "<DESCRIPTION>"
  }
}
export { Command };
```
_В каталоге `commands` находится файл `.snippet.js` — это минимальный фрагмент с кодом, который рекомендуется копировать как основу при создании новых команд._


## Как отправить ответ
Как было сказано ранее, ответ отправить надо, иначе пользователь и Вы увидите ошибку.  
Отправка происходит через взаимодействие с объектом `interaction`. Вам нужно через него отправить сообщение или отобразить модальное окно.  
Минимальный пример:  
```js
const message = {content: "hello, world"};
interaction.reply(message);
```
Используйте утилиту [`MessageConstructor`]() для генерации сообщений!

## Как создать компонент
Компоненты можно прикрепить к сообщению или к модельному окну. В обоих случаях требуется установить "строку компонентов".  
При использовании `MessageConstructor` и `ModalConstructor` это происходит автоматически.  
  
Каждый из компонентов имеет уникальные свойства, которые должны быть указаны. Найти их можно [по ссылке]().
```js
const component = {
  type: ComponentType,
  customId: "@command/.snippet/example:(0)"
  // ...другие свойства 
}
new MessageConstructor({
  //...
  components: component
})
```
Если Вы хотите передать несколько компонентов, оберните их в массив.  
  
Обязательное поле **customId** содержит информацию для будущей обработки взаимодействия.  
Так, для вызова `onComponentInteraction` необходимо, чтобы `customId` начинался строкой `@command/<имя_команды>`.  

## Советы по стилю кода
- Создавайте отдельные классы для логики команды. Экспортируемый класс `Command` используйте только как средство получения взаимодействий и ответов на них.
- Генерацию сообщений по возможности стоит выносить в отдельную/отдельные функции. 
 
## Нюансы о которых стоит знать:
\*Стартовая точка приложения, которая получает данные об взаимодействии — это событие получаемое в `app.client.on()`, "createInteraction". Данные передается в обработчик `~/events/interactionCreate.js`, который по возможности вызывает один из методов: `onSlashInteraction` или `onComponentInteraction` соответствующей команды.  
  
\*`MessageConstructor` и `ModalConstructor` для трансформации компонентов используют утилиту `ComponentsSimplify`
